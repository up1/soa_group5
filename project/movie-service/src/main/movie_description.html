<!DOCTYPE html>

<html xmlns:th="http://www.w3.org/1999/xhtml">

<head>
	<meta charset="utf-8" />
	<!--Import Google Icon Font-->
	<link href="http://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />

	<script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>

	<!--Let browser know website is optimized for mobile-->
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<link href="https://fonts.googleapis.com/css?family=Kanit" rel="stylesheet" />
	<script src="js/MovieDetail.js"></script>
	<script src="js/logged.js"></script>
	<!--<script src="js/favorite.js"></script>-->
	<link rel="stylesheet" type="text/css" href="semantic/dist/semantic.min.css" />
	<script src="https://code.jquery.com/jquery-3.1.1.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="
			crossorigin="anonymous"></script>
	<script src="semantic/dist/semantic.min.js"></script>

	<link rel="stylesheet" type="text/css" href="css/custom.css"/>

	<title>Test</title>
</head>

<body>
<!-- NavBar-->
<div th:replace="navbar :: navbar"></div>

<img id="cover" />

<!--Movie Description-->
<div class="ui container">
	<div class="ui grid centered">
		<div class="row">
			<div class="five wide column">
				<img id="poster" />
			</div>
			<div class="eleven wide column" style="padding-left: 30px;">
				<div class="ui grid">
					<div class="twelve wide column">
						<h1 id="name_en"></h1>
						<h2 id="name_th"></h2>
					</div>
					<div class="four wide column" >
						<br/><br/><br/>
						<div onclick="like_movie();" class="ui button" tabindex="0">
							<i class="heart icon"></i> Like
						</div>
					</div>
				</div>
				<hr/>
				<h3>เรื่องย่อ</h3>
				<span id="description"></span>
				<div class="ui grid" style="padding-top: 10%;">
					<div class="twelve wide column">
						<h4 id="release_date" style="margin: 0;"></h4><br/>
						<h4 id="duration" style="margin: 0;"></h4>
					</div>
					<div class="four wide column right">
						<form action="#" th:action="@{/show}" th:object="${check}" method="post" style="display:inline-block;">
							<input type="hidden" id="selected_movie" th:field="*{selected_movie}"/>
							<input type="hidden" id="selected_cinema" th:field="*{selected_cinema}"/>
							<button id="check_showtime_button" type="submit" onclick="go_to_showtime()" class="waves-effect waves-light btn red">Check Showtimes</button>
						</form>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div class="ui centered">
		<iframe width="639" height="360" id="trailer" frameborder="0" allowfullscreen=""></iframe>
	</div>
</div>
<!---->


<!-- movie id -->
<div id="movie_id" hidden="true" th:text="${id}"></div>

<!-- Footer-->
<div class="ui centered grid">
	<div th:replace="footer :: footer"></div>
</div>
<script type="text/javascript">
                    var movie_test_list = [];
                    var cinema_test_list = [];

                    function go_to_showtime(){
                    movie_test_list.push(document.getElementById('movie_id').innerHTML);
                    document.getElementById('selected_movie').value = movie_test_list;
                    document.getElementById('selected_cinema').value = cinema_test_list;

                    console.log(document.getElementById('selected_movie').value);
                    console.log(document.getElementById('selected_cinema').value);
                    }

                    function like_movie(){
                    movie_test_list.push(document.getElementById('movie_id').innerHTML);
                    document.getElementById('selected_movie').value = movie_test_list;
					$.ajax({ "url": "http://localhost:9004/like?movie_id=" + movie_test_list,
							"type": "POST"})
					.then(function (data, status, jqxhr) {});
                    }

                    function unlike_movie(){
                    movie_test_list.push(document.getElementById('movie_id').innerHTML);
                    document.getElementById('selected_movie').value = movie_test_list;
					$.ajax({ "url": "http://localhost:9004/unlike?movie_id=" + movie_test_list,
							"type": "DELETE"})
					.then(function (data, status, jqxhr) {});
                    }


	</script>

</body>

</html>