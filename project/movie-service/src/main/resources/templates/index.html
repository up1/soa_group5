<!DOCTYPE html>
<html xmlns:th="http://www.w3.org/1999/xhtml">
<head>

    <meta charset="UTF-8"/>
    <!-- jQuery -->
    <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>

    <!-- Custom CSS -->
    <!--<link rel="stylesheet" href="css/custom.css"/>-->

    <link href="https://fonts.googleapis.com/css?family=Kanit" rel="stylesheet"/>

    <script src="js/movieAjax.js"></script>
    <script src="js/cinemaAjax.js"></script>
    <script src="js/search.js"></script>
    <script src="js/logged.js"></script>

    <link rel="stylesheet" type="text/css" href="semantic/dist/semantic.min.css"/>

    <link rel="stylesheet" type="text/css" href="css/custom.css"/>
    <script
            src="https://code.jquery.com/jquery-3.1.1.min.js"
            integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="
            crossorigin="anonymous"></script>
    <script src="semantic/dist/semantic.min.js"></script>

    <title> ShowtimeTH </title>
</head>
<body>
<!-- NavBar-->
<div th:replace="navbar :: navbar"></div>
<!--Header pic-->
<div class="ui centered grid" style="padding-bottom: 20px; ">
    <img src="test1.jpeg"/></div>
<!--Check Showtime-->
<div th:replace="check_showtime :: check_showtime"></div>

<!--<p class="cinema_name"></p>-->

<!-- Movie -->
<div class="ui grid centered">
    <div class="ui card twelve wide column centered">
        <div id="movie-container" class="ui three column grid">

        </div>
    </div>
</div>


<script th:inline="javascript">
    $(document).ready(function() {


    $.ajax({

        url: "http://localhost:9001/movies"

    }).then(function(data, status, jqxhr) {

        $.each(data, function(i){
            var movie_test_list = [];
            var cinema_test_list = [];
             $('#movie-container').append('<div id="' + data[i].id +'" class="movie-content column"></div>');

            $('#'+data[i].id).append(`
                                                <div class="ui segment card">

                                                        <a id="moviedes${data[i].id}" href="/movie_desc?id=${data[i].id}" class="image">
                                                            <img src="${ data[i].poster }"/>
                                                        </a>
                                                            <p class="name_en"> ${ data[i].name_en } </p>
                                                            <p class="name_th"> ${ data[i].name_th} </p>
                                                            <p class="release_date"> ${ data[i].release_date} </p>
                                                            <form action="#" th:action="@{/show}" th:object="${check}" method="post" style="display:inline-block;">
                                                            	<input type="hidden" id="movie${data[i].id}" th:field="*{selected_movie}"/>
                                                            	<input type="hidden" id="selected_cinema" th:field="*{selected_cinema}"/>
                                                            	<button type="submit" id="movieshow${data[i].id}" class="ui button" style="width:100%;">Check Showtimes</button>
                                                            </form>
                                                </div>`);
            movie_test_list.push(data[i].id);
            document.getElementById("movie"+data[i].id).value = movie_test_list;
            document.getElementById('selected_cinema').value = cinema_test_list;
            console.log(document.getElementById("movie"+data[i].id).value);
            console.log(document.getElementById('selected_cinema').value);
        });

    });
});
</script>
</body>
</html>